@page "/compte"
@using BlazorAutoPulse.ViewModel
@inject NavigationManager Navigation
@inject CompteViewModel VM
@inject ConnexionViewModel ConnexionVM

<PageTitle>Mon Compte - AutoPulse</PageTitle>

<div class="account-container">
    <div class="sidebar">
        <div class="profile-section">
            <!-- Photo de profil -->
            <img src="@VM.GetImageProfil(VM.compte.IdCompte)" idImage="@(VM.idImage != null ? VM.idImage : "")" alt="Photo de Profil" class="profile-photo" />
        </div>

        <nav class="navbar">
            <ul>
                <li><a href="/annonces">Annonces</a></li>
                <li><a href="/avis">Avis</a></li>
                <li><a href="/adresses">Adresses</a></li>
                <li><a href="/favoris">Favoris</a></li>
                <li><a href="/commandes">Commandes</a></li>
            </ul>
        </nav>
    </div>

    <div class="account-details">
        <h2>Informations de Compte</h2>

        <!-- Informations personnelles -->
        <div class="info-item">
            <strong>Nom:</strong> @VM.compte.Nom
        </div>
        <div class="info-item">
            <strong>PrÃ©nom:</strong> @VM.compte.Prenom
        </div>
        <div class="info-item">
            <strong>Date de naissance:</strong> @VM.compte.DateNaissance
        </div>
        <div class="info-item">
            <strong>Pseudo:</strong> @VM.compte.Pseudo
        </div>
        <div class="info-item">
            <strong>Email:</strong> @VM.compte.Email
        </div>

        <!-- Informations pour vendeur pro -->
        @* @if (VM. == "Vendeur Pro")
        {
            <div class="info-item">
                <strong>NumÃ©ro SIRET:</strong> @VM. 
            </div>
            <div class="info-item">
                <strong>Raison Sociale:</strong> @VM.
            </div>
        } *@

        <div class="edit-profile">
            <button @onclick="EditProfile">Modifier le profil</button>
            <button @onclick="ConnexionVM.DeconnexionUtilisateur">DÃ©connexion</button>
            <div class="form-group">
                <label for="vehiclePhotos" class="file-upload" style="cursor: pointer; display: block; border: 2px dashed #ccc; padding: 20px; text-align: center;">
                    <div style="font-size: 48px; margin-bottom: 20px;">ðŸ“¸</div>
                    <p style="color: #aaa;">Cliquez pour ajouter des photos</p>
                    <p style="color: #666; font-size: 14px; margin-top: 10px;">JPG, PNG - Max 10 photos</p>
                </label>
                <InputFile id="vehiclePhotos" OnChange="@VM.UploadImageProfil" multiple style="display:none"/>
            </div>
            <div class="form-group">
                <label for="vehiclePhotosUpdate" class="file-upload" style="cursor: pointer; display: block; border: 2px dashed #ccc; padding: 20px; text-align: center;">
                    <div style="font-size: 48px; margin-bottom: 20px;">ðŸ“¸</div>
                    <p style="color: #aaa;">Cliquez pour ajouter des photos</p>
                    <p style="color: #666; font-size: 14px; margin-top: 10px;">JPG, PNG - Max 10 photos</p>
                </label>
                <InputFile id="vehiclePhotosUpdate" OnChange="@VM.ChangeImageProfil" multiple style="display:none"/>
            </div>
        </div>
    </div>
</div>

@code {

    protected override async Task OnInitializedAsync()
    {
        await VM.InitializeAsync(StateHasChanged, Navigation);
    }

    private void EditProfile()
    {
        // Logique pour modifier le profil utilisateur
        Navigation.NavigateTo("/edit-profile");
    }
}
