@page "/"
@using BlazorAutoPulse.ViewModel
@inject HomeViewModel VM
@inject NavigationManager Navigation
@inject RechercheViewModel RechercheVM

<PageTitle>AutoPulse</PageTitle>

<section class="hero no-bootstrap">
    <div class="hero-content">
        <h1>Trouvez Votre Voiture Idéale</h1>
        <p>Plus de 500 véhicules d'occasion sélectionnés et garantis</p>

        <BarreDeRechercheAvecFiltresComposant VM="@RechercheVM" IsHomePage="true"/>
    </div>
</section>

<div class="container">
    <h2 class="section-title">Nos Dernières Offres</h2>
    @if (VM.allAnnonces is null)
    {
        <h2>Pas d'annonces mise en avant</h2>
    }
    else
    {
        <div class="cars-grid">
            @foreach (var a in VM.allAnnonces)
            {
                <AnnonceComposant Annonce="@a" />
            }
        </div>
    }
</div>


@code {
    protected override async Task OnInitializedAsync()
    {
        await VM.InitializeAsync(StateHasChanged);
        await RechercheVM.InitializeAsync(StateHasChanged);
    }
}