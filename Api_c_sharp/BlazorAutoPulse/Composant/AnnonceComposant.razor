@using BlazorAutoPulse.Model
@using BlazorAutoPulse.ViewModel
@inject AnnonceComposantViewModel VM
@inject NavigationManager Navigation

<div class="car-card">
    <div class="car-image">
        @if (@Annonce.DatePublication >= DateTime.Now.AddMonths(-1))
        {
            <div class="car-badge">RÃ‰CENT</div>
        }
        <img src="@VM.GetFirstImage(Annonce.IdVoiture)" />
    </div>
    <div class="car-info">
        <h3 class="car-title">@Annonce.Libelle</h3>
        <div class="car-specs">
            <span>ðŸ“… @Annonce.Annee</span>
        </div>
        <div class="car-specs">
            <span>ðŸ“Š @Annonce.Kilometrage km</span>
        </div>
        <div class="car-price">@Annonce.Prix.ToString("N0") â‚¬</div>
        <button class="car-btn" @onclick="NavigateToDetail">Voir DÃ©tails</button>
    </div>
</div>

@code {
    [Parameter]
    public Annonce Annonce { get; set; }

    private void NavigateToDetail()
    {
        Navigation.NavigateTo($"/annonce/{Annonce.IdAnnonce}");
    }
}